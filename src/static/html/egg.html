<meta name="viewport" content="width=device-width, initial-scale=1">
<title>egg</title>
<style>
:root{
  --deg: 30;
  --radians: 0;
  --lightRadians: -2.1;
  --w: 40;
  --h: 40;
  --sin: 1;
  --t: 1;
}
html,body{
  width:100vw;
  height:100vh;
  margin:0;
  overflow: hidden;
}
body{
  background-color: #333;
  background-image: radial-gradient(circle at 70% 20%, #fff2 0, transparent 50% 70%, #0002 100%)
  font-size: 16px;
}
.wrap{
  position: absolute;
  z-index: 1;
  width:80%;
  margin-top: 80vh;
  margin-left: 10%;
}
.egg{
  --radians: calc(var(--deg)/-180*pi);
  --rdns: calc(var(--radians) + var(--lightRadians));
  --emX: calc(cos(var(--rdns))*-1em);
  --emY: calc(sin(var(--rdns))*-1em);
  --emPcX: calc(cos(var(--rdns))*-1%);
  --emPcY: calc(sin(var(--rdns))*-1%);

  --color: #FFB330;

  position: absolute;
  /*left: 20vw;
  top: 10vh;
  width: 60vw;
  height: 45vw;
  background-color: #ddd;
  border-radius: 60% 40% 50% 55%;*/
  box-shadow:
    calc( -0.25*var(--emX)) calc( 0.25*var(--emY)) 0.25em #0008,
    calc( -0.5*var(--emX)) calc( 0.5*var(--emY)) 0.5em #fff inset,
    calc( -2.5*var(--emX)) calc( 2.5*var(--emY)) 5em #fff inset,
    calc( 2.5*var(--emX)) calc( -2.5*var(--emY)) 5em #0004 inset,
    calc( 0.25*var(--emX)) calc( -0.25*var(--emY)) 0.25rem #0004 inset
  ;

  transform: rotate(calc(var(--radians)*1rad - 1.5rad));
  transform-origin: 50% 50%;

  &:before,&:after{
    content: '';
    display: block;
    position: absolute;
  }
  &:before{
    left: var(--left);
    top: var(--top);
    width: var(--width);
    height: var(--height);
    border-radius: var(--borderRadius);
    background-color: var(--color);

    --distHigh: 3;
    --offHigh: 30;

    background-image: radial-gradient(
      ellipse farthest-corner at calc(50% + var(--offHigh)*var(--emPcX)) calc(50% - var(--offHigh)*var(--emPcY)),
      #FFFD 0 15%,
      #FFF6 15% 25%,
      transparent 50%,
      #0002 80% 100%
    );
    box-shadow:
      calc( var(--distHigh)*var(--emX)) calc( -1*var(--distHigh)*var(--emY)) 2em 1em #E6A300 inset,
      0 0 0.25em 0.125em var(--color)
    ;

  }
}
</style>
<script src="//cdn.jsdelivr.net/npm/eruda"></script>
<script>

    const {body} = document

    const w = document.documentElement.clientWidth // todo update onresize
    const h = document.documentElement.clientHeight

    const ce = (name, parent, props) => {
      const elm = document.createElement(name)
      //props&&Object.entries(props).forEach(([prop,value])=>elm.setProperty(prop, value))
      parent?.appendChild(elm)
      return elm
    }

    const wrap = ce('div', body)
    wrap.classList.add('wrap')

    Object.entries({
      '--deg': n=>n*3.6,
      fontSize: n=>1+64*n
    }).forEach(args=>{
      const [name, mapper] = args
      //const input = ce('input', wrap, {type: 'range'})
      const input = ce('input', wrap)
      input.addEventListener('input', e=>{
        const value = e.currentTarget.value
        body.style.setProperty(name, mapper(value))
      }) 
    })

    /*const input = document.querySelector('input')
    const egg = document.querySelector('.egg')
    const step = 60
    const num = w*h/3E3<<0

    input.addEventListener('input', e=>{
      const value = e.currentTarget.value
      body.style.setProperty('--deg', value*3.6)
      //body.style.setProperty('--radians', value/50*Math.PI)
    })*/

    const {random} = Math
    const r = (m=1)=>m*random();

    for(let i=0;i<6;i++){
      const div = document.createElement('div')
      div.classList.add('egg');
      const size = 30+r(40)
      Object.assign(div.style,{

        left: `${1+r(60)}em`,
        top: `${1+r(70)}em`,

        width: `${size}em`,
        height: `${size+10*(r()-0.5)}em`,

        borderRadius: `${40+r(20)}% ${40+r(20)}% ${40+r(20)}% ${40+r(20)}%`
      })
      body.appendChild(div)

      ////

      const yolkSize = 30 + r(30)
      const restSize = 100 - yolkSize - 20

      Object.entries({

        left: `${5+r(restSize)}%`,
        top: `${5+r(restSize)}%`,

        width: `${yolkSize}%`,
        height: `${yolkSize+10*(r()-0.5)}%`,

        borderRadius: `${40+r(20)}% ${40+r(20)}% ${40+r(20)}% ${40+r(20)}%`
      }).forEach((args)=>{

        const [key, value] = args
        div.style.setProperty('--'+key, value)

      })
    }

</script>
